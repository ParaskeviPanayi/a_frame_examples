<!DOCTYPE html>
<html>

<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <style>
    #magnifying-glass {
      cursor: none;
    }
  </style>
</head>

<body>
  <a-scene>
    <!-- 360-degree image background -->
    <a-sky id="background-image" src="materials/12.jpg"></a-sky>


    <!-- Camera for the magnifying glass -->
    <a-camera id="magnifying-camera" camera="active: false;">
      <!-- Magnifying glass -->
      <a-circle id="magnifying-glass" position="0 0 -5" radius="1"
        material="shader: flat; transparent: true; "></a-circle>
    </a-camera>
  </a-scene>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var background = document.querySelector('#background-image');
      var magnifyingGlass = document.querySelector('#magnifying-glass');
      var magnifyingCamera = document.querySelector('#magnifying-camera');

      magnifyingCamera.object3D.position.set(0, 0, 0);

      var renderer = document.querySelector('a-scene').renderer;

      function updateMagnifyingGlass(event) {
        var mouseX = event.clientX;
        var mouseY = event.clientY;

        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;

        var mouseXScene = (mouseX / windowWidth) * 2 - 1;
        var mouseYScene = -(mouseY / windowHeight) * 2 + 1;

        magnifyingGlass.object3D.position.set(mouseXScene, mouseYScene, -6);

        // Render the background image from the perspective of the magnifying camera
        renderer.render(background.object3D, magnifyingCamera.object3DMap.camera);

        // Update the magnifying glass texture
        magnifyingGlass.setAttribute('material', 'src', renderer.domElement.toDataURL());
      }

      document.addEventListener('mousemove', updateMagnifyingGlass);
    });
  </script>
</body>

</html>